(self["webpackChunkticu"]=self["webpackChunkticu"]||[]).push([[173],{6154:function(e,l,a){var t,o,n;(function(a,u){o=[],t=u,n="function"===typeof t?t.apply(l,o):t,void 0===n||(e.exports=n)})(0,(function(){"use strict";function l(e,l){return"undefined"==typeof l?l={autoBom:!1}:"object"!=typeof l&&(console.warn("Deprecated: Expected third argument to be a object"),l={autoBom:!l}),l.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)?new Blob(["\ufeff",e],{type:e.type}):e}function t(e,l,a){var t=new XMLHttpRequest;t.open("GET",e),t.responseType="blob",t.onload=function(){r(t.response,l,a)},t.onerror=function(){console.error("could not download file")},t.send()}function o(e){var l=new XMLHttpRequest;l.open("HEAD",e,!1);try{l.send()}catch(e){}return 200<=l.status&&299>=l.status}function n(e){try{e.dispatchEvent(new MouseEvent("click"))}catch(t){var l=document.createEvent("MouseEvents");l.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(l)}}var u="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof a.g&&a.g.global===a.g?a.g:void 0,d=u.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),r=u.saveAs||("object"!=typeof window||window!==u?function(){}:"download"in HTMLAnchorElement.prototype&&!d?function(e,l,a){var d=u.URL||u.webkitURL,r=document.createElement("a");l=l||e.name||"download",r.download=l,r.rel="noopener","string"==typeof e?(r.href=e,r.origin===location.origin?n(r):o(r.href)?t(e,l,a):n(r,r.target="_blank")):(r.href=d.createObjectURL(e),setTimeout((function(){d.revokeObjectURL(r.href)}),4e4),setTimeout((function(){n(r)}),0))}:"msSaveOrOpenBlob"in navigator?function(e,a,u){if(a=a||e.name||"download","string"!=typeof e)navigator.msSaveOrOpenBlob(l(e,u),a);else if(o(e))t(e,a,u);else{var d=document.createElement("a");d.href=e,d.target="_blank",setTimeout((function(){n(d)}))}}:function(e,l,a,o){if(o=o||open("","_blank"),o&&(o.document.title=o.document.body.innerText="downloading..."),"string"==typeof e)return t(e,l,a);var n="application/octet-stream"===e.type,r=/constructor/i.test(u.HTMLElement)||u.safari,i=/CriOS\/[\d]+/.test(navigator.userAgent);if((i||n&&r||d)&&"undefined"!=typeof FileReader){var m=new FileReader;m.onloadend=function(){var e=m.result;e=i?e:e.replace(/^data:[^;]*;/,"data:attachment/file;"),o?o.location.href=e:location=e,o=null},m.readAsDataURL(e)}else{var c=u.URL||u.webkitURL,s=c.createObjectURL(e);o?o.location=s:location.href=s,o=null,setTimeout((function(){c.revokeObjectURL(s)}),4e4)}});u.saveAs=r.saveAs=r,e.exports=r}))},1435:function(e,l,a){"use strict";a.r(l),a.d(l,{default:function(){return V}});a(7658);var t=a(3396),o=a(4870),n=a(7139),u=a(2748),d=a(8741),r=a(7178),i=a(8665),m=a(6539),c=a(2483),s=a(6154),f=a.n(s);const p={class:"layout-padding"},w={class:"gutter-v"},g={class:"layout-v"},h={class:"card-header"},v={class:"layout-h"},b={key:0,class:"gutter-v"},y={key:1,class:"gutter-v"},k={key:4,class:"code"};var _=(0,t.aZ)({__name:"index",setup(e){const l=()=>Array.from({length:2},(()=>Array.from({length:5},(()=>({player:"",order:""}))))),a=()=>({matchDate:null,matchType:d.ru[0],matchMemberBPMode:d.J9[0],matchMode:d.vk[0],matchTeamList:l(),gameList:[],showCode:!1}),s=(0,t.Fl)((()=>d.J3.filter((e=>!U.form.matchTeamList.flat().find((l=>l.player===e.nickName)))))),_=(0,t.Fl)((()=>d.zS.filter((e=>"固定"===e||!U.form.matchTeamList.flat().find((l=>l.order===e)))))),U=(0,o.qj)({form:a(),isLock:!1}),L=(0,c.yj)(),{matchId:V}=L.query,T=`match-edit-${V}`,W=()=>{if(V){const e=(0,m.Z)().find((e=>e.id===V));e&&(U.isLock=!0,U.form=e)}else{const e=localStorage.getItem(T);e&&(U.form=JSON.parse(e)),U.form.gameList?.length&&(U.isLock=!0)}};W();const j=()=>{U.form.matchTeamList?.flat().find((e=>!e.player||!e.order))?r.z8.error("请选择队伍人员和顺序"):U.isLock=!0},D=()=>{const e={gameType:d.xm[0],winTeamIndex:null,bpFirstTeamIndex:d.XH[0],bpHeroQueue:[],teamList:U.form.matchTeamList.map((e=>({location:null,heroList:e.map((e=>({player:e.player,hero:""})))})))};U.form.gameList.push(e)},H=e=>{U.form.gameList.splice(e,1)},S=()=>{U.isLock=!1,U.form=a()},x=()=>{U.showCode=!U.showCode},Y=e=>U.form.matchTeamList[e]?.map((e=>e.player)).join("");(0,t.YP)((()=>U.form),(()=>{localStorage.setItem(T,JSON.stringify(U.form))}),{deep:!0});const M=(0,t.Fl)((()=>{const e=[0,0],l=[0,0];let a=null;return U.form.gameList.forEach((a=>{"加赛"===a.gameType?l[a.winTeamIndex]=l[a.winTeamIndex]+1:e[a.winTeamIndex]=e[a.winTeamIndex]+1})),e[0]>e[1]&&(a=0),e[0]<e[1]&&(a=1),{...U.form,scoreList:e,playOffScoreList:l,winTeamIndex:a}})),C=()=>{if(!U.form.matchDate)return void r.z8.error("请选择比赛时间");const e=new Blob([JSON.stringify(M.value)],{type:"application/json; charset=utf-8"});f().saveAs(e,`${U.form.matchDate}.json`)};return(e,l)=>{const a=(0,t.up)("el-alert"),r=(0,t.up)("el-date-picker"),m=(0,t.up)("el-form-item"),c=(0,t.up)("el-option"),f=(0,t.up)("el-select"),L=(0,t.up)("el-form"),V=(0,t.up)("el-card"),T=(0,t.up)("el-button");return(0,t.wg)(),(0,t.iD)("div",p,[(0,t._)("div",w,[(0,t.Wm)(a,{type:"error",title:"比赛配置完后，点击复制下载配置按钮将文件给开发人员添加/覆盖数据后重新打包即可"})]),(0,t.Wm)(V,{header:"比赛设置",class:"gutter-v"},{default:(0,t.w5)((()=>[(0,t.Wm)(L,{inline:""},{default:(0,t.w5)((()=>[(0,t.Wm)(m,{label:"比赛日期"},{default:(0,t.w5)((()=>[(0,t.Wm)(r,{size:e.size,placeholder:"选择比赛日期",type:"date",modelValue:U.form.matchDate,"onUpdate:modelValue":l[0]||(l[0]=e=>U.form.matchDate=e),"value-format":"YYYY-MM-DD"},null,8,["size","modelValue"])])),_:1}),(0,t.Wm)(m,{label:"比赛类型"},{default:(0,t.w5)((()=>[(0,t.Wm)(f,{placeholder:"选择比赛类型",modelValue:U.form.matchType,"onUpdate:modelValue":l[1]||(l[1]=e=>U.form.matchType=e)},{default:(0,t.w5)((()=>[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)((0,o.SU)(d.ru),((e,l)=>((0,t.wg)(),(0,t.j4)(c,{key:l,label:e,value:e},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),(0,t.Wm)(m,{label:"比赛模式"},{default:(0,t.w5)((()=>[(0,t.Wm)(f,{placeholder:"选择比赛类型",modelValue:U.form.matchMode,"onUpdate:modelValue":l[2]||(l[2]=e=>U.form.matchMode=e)},{default:(0,t.w5)((()=>[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)((0,o.SU)(d.vk),((e,l)=>((0,t.wg)(),(0,t.j4)(c,{key:l,label:e,value:e},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),(0,t.Wm)(m,{label:"选马方式"},{default:(0,t.w5)((()=>[(0,t.Wm)(f,{placeholder:"选择比赛类型",modelValue:U.form.matchMemberBPMode,"onUpdate:modelValue":l[3]||(l[3]=e=>U.form.matchMemberBPMode=e)},{default:(0,t.w5)((()=>[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)((0,o.SU)(d.J9),((e,l)=>((0,t.wg)(),(0,t.j4)(c,{key:l,label:e,value:e},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1})])),_:1})])),_:1}),((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)((0,o.SU)(d.XH),((e,l)=>((0,t.wg)(),(0,t.j4)(V,{header:e.name,class:"gutter-v",key:l},{default:(0,t.w5)((()=>[(0,t.Wm)(L,{inline:""},{default:(0,t.w5)((()=>[((0,t.wg)(),(0,t.iD)(t.HY,null,(0,t.Ko)(5,((e,a)=>(0,t.Wm)(m,{key:a},{default:(0,t.w5)((()=>[(0,t._)("div",g,[(0,t._)("div",null,[(0,t.Wm)(f,{placeholder:`选择队员${a+1}`,modelValue:U.form.matchTeamList[l][a].player,"onUpdate:modelValue":e=>U.form.matchTeamList[l][a].player=e,clearable:"",disabled:U.isLock,filterable:""},{default:(0,t.w5)((()=>[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)((0,o.SU)(s),((e,l)=>((0,t.wg)(),(0,t.j4)(c,{key:l,label:`${e.nickName}(${e.name})`,value:e.nickName},null,8,["label","value"])))),128))])),_:2},1032,["placeholder","modelValue","onUpdate:modelValue","disabled"])]),(0,t._)("div",null,[(0,t.Wm)(f,{placeholder:`选择队员${a+1}顺序`,modelValue:U.form.matchTeamList[l][a].order,"onUpdate:modelValue":e=>U.form.matchTeamList[l][a].order=e,clearable:"",disabled:U.isLock},{default:(0,t.w5)((()=>[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)((0,o.SU)(_),((e,l)=>((0,t.wg)(),(0,t.j4)(c,{key:l,label:e,value:e},null,8,["label","value"])))),128))])),_:2},1032,["placeholder","modelValue","onUpdate:modelValue","disabled"])])])])),_:2},1024))),64))])),_:2},1024)])),_:2},1032,["header"])))),128)),((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(U.form.gameList,((e,l)=>((0,t.wg)(),(0,t.j4)(V,{key:l,class:"gutter-v"},{header:(0,t.w5)((()=>[(0,t._)("div",h,[(0,t._)("span",null,"对局"+(0,n.zw)(l+1),1),(0,t.Wm)(T,{class:"button",text:"",onClick:e=>H(l)},{default:(0,t.w5)((()=>[(0,t.Uk)("删除对局")])),_:2},1032,["onClick"])])])),default:(0,t.w5)((()=>[(0,t.Wm)(L,{inline:""},{default:(0,t.w5)((()=>[(0,t.Wm)(m,{label:"对局类型"},{default:(0,t.w5)((()=>[(0,t.Wm)(f,{placeholder:"对局类型",modelValue:e.gameType,"onUpdate:modelValue":l=>e.gameType=l},{default:(0,t.w5)((()=>[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)((0,o.SU)(d.xm),((e,l)=>((0,t.wg)(),(0,t.j4)(c,{key:l,label:e,value:e},null,8,["label","value"])))),128))])),_:2},1032,["modelValue","onUpdate:modelValue"])])),_:2},1024),(0,t.Wm)(m,{label:"获胜队伍"},{default:(0,t.w5)((()=>[(0,t.Wm)(f,{placeholder:"选择获胜队伍",modelValue:e.winTeamIndex,"onUpdate:modelValue":l=>e.winTeamIndex=l},{default:(0,t.w5)((()=>[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)((0,o.SU)(d.XH),((e,l)=>((0,t.wg)(),(0,t.j4)(c,{key:l,label:Y(e.code),value:e.code},{default:(0,t.w5)((()=>[(0,t.Uk)((0,n.zw)(Y(e.code)),1)])),_:2},1032,["label","value"])))),128))])),_:2},1032,["modelValue","onUpdate:modelValue"])])),_:2},1024),(0,t.Wm)(m,{label:"先BP队伍"},{default:(0,t.w5)((()=>[(0,t.Wm)(f,{placeholder:"选择先Ban先选队伍",modelValue:e.bpFirstTeamIndex,"onUpdate:modelValue":l=>e.bpFirstTeamIndex=l},{default:(0,t.w5)((()=>[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)((0,o.SU)(d.XH),((e,l)=>((0,t.wg)(),(0,t.j4)(c,{key:l,label:Y(e.code),value:e.code},{default:(0,t.w5)((()=>[(0,t.Uk)((0,n.zw)(Y(e.code)),1)])),_:2},1032,["label","value"])))),128))])),_:2},1032,["modelValue","onUpdate:modelValue"])])),_:2},1024)])),_:2},1024),(0,t.Wm)(L,null,{default:(0,t.w5)((()=>[(0,t.Wm)(m,{label:"英雄ban选顺序"},{default:(0,t.w5)((()=>[(0,t._)("div",null,(0,n.zw)(e.bpHeroQueue?.length)+"/24 ",1),(0,t.Wm)(f,{placeholder:"选择英雄",modelValue:e.bpHeroQueue,"onUpdate:modelValue":l=>e.bpHeroQueue=l,filterable:"",multiple:"",style:{width:"100%"}},{default:(0,t.w5)((()=>[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)((0,o.SU)(i.Z),((e,l)=>((0,t.wg)(),(0,t.j4)(c,{key:l,label:e.name_loc,value:e.name_loc},null,8,["label","value"])))),128)),(0,t.Wm)(c,{value:"",label:"跳过"})])),_:2},1032,["modelValue","onUpdate:modelValue"])])),_:2},1024)])),_:2},1024),(0,t._)("div",v,[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(e.teamList,((e,l)=>((0,t.wg)(),(0,t.j4)(V,{key:l,header:Y(l),class:(0,n.C_)(["layout-fill",{"gutter-h":0===l}])},{default:(0,t.w5)((()=>[(0,t.Wm)(m,{label:"位置"},{default:(0,t.w5)((()=>[(0,t.Wm)(f,{placeholder:"选择位置",modelValue:e.location,"onUpdate:modelValue":l=>e.location=l},{default:(0,t.w5)((()=>[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)((0,o.SU)(d.Yf),((e,l)=>((0,t.wg)(),(0,t.j4)(c,{key:l,label:e,value:e},null,8,["label","value"])))),128))])),_:2},1032,["modelValue","onUpdate:modelValue"])])),_:2},1024),((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(e.heroList,((e,l)=>((0,t.wg)(),(0,t.j4)(m,{label:`${e.player}`,key:l},{default:(0,t.w5)((()=>[(0,t.Wm)(f,{placeholder:"选择英雄",modelValue:e.hero,"onUpdate:modelValue":l=>e.hero=l,filterable:""},{default:(0,t.w5)((()=>[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)((0,o.SU)(i.Z),((e,l)=>((0,t.wg)(),(0,t.j4)(c,{key:l,label:e.name_loc,value:e.name_loc},null,8,["label","value"])))),128))])),_:2},1032,["modelValue","onUpdate:modelValue"])])),_:2},1032,["label"])))),128))])),_:2},1032,["header","class"])))),128))])])),_:2},1024)))),128)),U.isLock?(0,t.kq)("",!0):((0,t.wg)(),(0,t.iD)("div",b,[(0,t.Wm)(T,{onClick:j,type:"success"},{default:(0,t.w5)((()=>[(0,t.Uk)("锁定参赛人员")])),_:1})])),U.isLock?((0,t.wg)(),(0,t.iD)("div",y,[(0,t.Wm)(T,{onClick:D,type:"success",icon:(0,o.SU)(u.v37)},{default:(0,t.w5)((()=>[(0,t.Uk)("添加对局")])),_:1},8,["icon"]),(0,t.Wm)(T,{onClick:C,type:"success"},{default:(0,t.w5)((()=>[(0,t.Uk)("复制下载配置")])),_:1}),(0,t.Wm)(T,{type:"success",onClick:S},{default:(0,t.w5)((()=>[(0,t.Uk)("刷新")])),_:1})])):(0,t.kq)("",!0),U.showCode?(0,t.kq)("",!0):((0,t.wg)(),(0,t.j4)(T,{key:2,onClick:x},{default:(0,t.w5)((()=>[(0,t.Uk)("查看配置")])),_:1})),U.showCode?((0,t.wg)(),(0,t.j4)(T,{key:3,onClick:x},{default:(0,t.w5)((()=>[(0,t.Uk)("收起配置")])),_:1})):(0,t.kq)("",!0),U.showCode?((0,t.wg)(),(0,t.iD)("pre",k,[(0,t.Uk)("      "),(0,t._)("code",null,(0,n.zw)((0,o.SU)(M)),1),(0,t.Uk)("\n    ")])):(0,t.kq)("",!0)])}}}),U=a(89);const L=(0,U.Z)(_,[["__scopeId","data-v-1269c890"]]);var V=L}}]);
//# sourceMappingURL=173.6698d350.js.map