"use strict";(self["webpackChunkticu"]=self["webpackChunkticu"]||[]).push([[353],{2580:function(t,e,a){a.d(e,{B:function(){return i}});var o=a(5743),n=a.n(o);const i=[{text:"今年",value:()=>{const t=new Date,e=new Date((new Date).getFullYear(),0);return[e,t]}},{text:"7.33以前",value:()=>{const t=n()("2022-6-6"),e=n()("2023-4-20");return[t,e]}},{text:"7.33以后",value:()=>{const t=n()("2023-4-21"),e=new Date;return[t,e]}}]},1310:function(t,e,a){a.d(e,{e:function(){return C}});a(7658);function o(t){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}function n(t,e){if("object"!==o(t)||null===t)return t;var a=t[Symbol.toPrimitive];if(void 0!==a){var n=a.call(t,e||"default");if("object"!==o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function i(t){var e=n(t,"string");return"symbol"===o(e)?e:String(e)}function r(t,e,a){return e=i(e),e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}var s=a(5743),h=a.n(s),c=a(8741);class l{constructor(t){r(this,"firstMatchDate",null),r(this,"lastMatchDate",null),r(this,"matchCount",0),r(this,"matchWinCount",0),r(this,"maxMatchWinCount",0),r(this,"maxMatchLoseCount",0),r(this,"matchFormCount",0),r(this,"gameCount",0),r(this,"gameWinCount",0),r(this,"maxGameWinCount",0),r(this,"maxGameLoseCount",0),r(this,"gameFormCount",0),r(this,"orderMap",{}),r(this,"heroMap",{}),r(this,"locationMap",{}),r(this,"sameTeamMatchMap",{}),r(this,"diffTeamMatchMap",{}),this.nickName=t}get info(){return c.J3.find((t=>t.nickName===this.nickName))}get heroList(){return Object.values(this.heroMap)}get locationList(){return Object.values(this.locationMap)}get sameTeamMatchList(){return Object.values(this.sameTeamMatchMap)}get diffTeamMatchList(){return Object.values(this.diffTeamMatchMap)}get orderList(){const t=Object.values(this.orderMap),e=t.filter((t=>-1===t.orderName.indexOf("队长"))),a=t.filter((t=>-1!==t.orderName.indexOf("队长")));if(a.length){const t=a.reduce(((t,e)=>({orderName:t.orderName,count:t.count+e.count,winCount:t.winCount+e.winCount,loseCount:t.loseCount+e.loseCount})),{orderName:"队长",count:0,winCount:0,loseCount:0});return[t,...e]}return e}setMatchDate(t){t&&(this.lastMatchDate?h()(this.lastMatchDate)<h()(t)&&(this.lastMatchDate=t):this.lastMatchDate=t,this.firstMatchDate?h()(this.firstMatchDate)>h()(t)&&(this.firstMatchDate=t):this.firstMatchDate=t)}winMatch(){this.matchCount+=1,this.matchWinCount+=1,this.matchFormCount<0?this.matchFormCount=1:this.matchFormCount+=1,this.matchFormCount>this.maxMatchWinCount&&(this.maxMatchWinCount=this.matchFormCount)}drawMatch(){this.matchCount+=1}loseMatch(){this.matchCount+=1,this.matchFormCount>0?this.matchFormCount=-1:this.matchFormCount-=1,Math.abs(this.matchFormCount)>this.maxMatchLoseCount&&(this.maxMatchLoseCount=Math.abs(this.matchFormCount))}winGame(){this.gameCount+=1,this.gameWinCount+=1,this.gameFormCount<0?this.gameFormCount=1:this.gameFormCount+=1,this.gameFormCount>this.maxGameWinCount&&(this.maxGameWinCount=this.gameFormCount)}loseGame(){this.gameCount+=1,this.gameFormCount>0?this.gameFormCount=-1:this.gameFormCount-=1,Math.abs(this.gameFormCount)>this.maxGameLoseCount&&(this.maxGameLoseCount=Math.abs(this.gameFormCount))}winOrder(t){this.orderMap[t]||(this.orderMap[t]={orderName:t,winCount:0,loseCount:0,count:0}),this.orderMap[t].count+=1,this.orderMap[t].winCount+=1}drawOrder(t){this.orderMap[t]||(this.orderMap[t]={orderName:t,winCount:0,loseCount:0,count:0}),this.orderMap[t].count+=1}loseOrder(t){this.orderMap[t]||(this.orderMap[t]={orderName:t,winCount:0,loseCount:0,count:0}),this.orderMap[t].count+=1,this.orderMap[t].loseCount+=1}winLocation(t){this.locationMap[t]||(this.locationMap[t]={location:t,winCount:0,loseCount:0,count:0}),this.locationMap[t].count+=1,this.locationMap[t].winCount+=1}loseLocation(t){this.locationMap[t]||(this.locationMap[t]={location:t,winCount:0,loseCount:0,count:0}),this.locationMap[t].count+=1,this.locationMap[t].loseCount+=1}winHero(t){this.heroMap[t]||(this.heroMap[t]={hero:t,winCount:0,loseCount:0,count:0}),this.heroMap[t].count+=1,this.heroMap[t].winCount+=1}loseHero(t){this.heroMap[t]||(this.heroMap[t]={hero:t,winCount:0,loseCount:0,count:0}),this.heroMap[t].count+=1,this.heroMap[t].loseCount+=1}winSameTeamMatch(t){t.sort();const e=t.join("");this.sameTeamMatchMap[e]||(this.sameTeamMatchMap[e]={playerList:t,winCount:0,count:0,loseCount:0}),this.sameTeamMatchMap[e].count+=1,this.sameTeamMatchMap[e].winCount+=1}loseSameTeamMatch(t){t.sort();const e=t.join("");this.sameTeamMatchMap[e]||(this.sameTeamMatchMap[e]={playerList:t,winCount:0,count:0,loseCount:0}),this.sameTeamMatchMap[e].count+=1,this.sameTeamMatchMap[e].loseCount+=1}winDiffTeamMatch(t){t.sort();const e=t.join("");this.diffTeamMatchMap[e]||(this.diffTeamMatchMap[e]={playerList:t,winCount:0,count:0,loseCount:0}),this.diffTeamMatchMap[e].count+=1,this.diffTeamMatchMap[e].winCount+=1}loseDiffTeamMatch(t){t.sort();const e=t.join("");this.diffTeamMatchMap[e]||(this.diffTeamMatchMap[e]={playerList:t,winCount:0,count:0,loseCount:0}),this.diffTeamMatchMap[e].count+=1,this.diffTeamMatchMap[e].loseCount+=1}}class u{constructor(){r(this,"playerMap",{})}get playerList(){return Object.values(this.playerMap)}getPlayer(t){return this.playerMap[t]||(this.playerMap[t]=new l(t)),this.playerMap[t]}}class m{constructor(t){r(this,"count",0),r(this,"winCount",0),r(this,"playerMap",{}),r(this,"banpickMap",{}),this.name=t}get playerList(){return Object.values(this.playerMap).sort(((t,e)=>t.count<e.count?1:-1))}winGame(t,e,a){this.count+=1,this.winCount+=1,this.playerMap[t]||(this.playerMap[t]={player:t,count:0,winCount:0,loseCacheList:[],winCacheList:[]}),this.playerMap[t].count+=1,this.playerMap[t].winCount+=1,this.playerMap[t].winCacheList.push({match:e,gameIndex:a})}loseGame(t,e,a){this.count+=1,this.playerMap[t]||(this.playerMap[t]={player:t,count:0,winCount:0,loseCacheList:[],winCacheList:[]}),this.playerMap[t].count+=1,this.playerMap[t].loseCacheList.push({match:e,gameIndex:a})}}class p{constructor(){r(this,"heroMap",{})}get heroList(){return Object.values(this.heroMap)}getHero(t){return this.heroMap[t]||(this.heroMap[t]=new m(t)),this.heroMap[t]}}var M=a(2325);const f=(t,e)=>t.reduce(((t,a)=>(a!==e&&"X"!==a&&"Y"!==a&&t.push(a),t)),[]),d=t=>-1===c.o_.indexOf(t)&&"X"!==t&&"Y"!==t,C=t=>{const e=new u,a=new p,o={"天辉":0,"夜魇":0};let n=0,i=0;return t.forEach((t=>{if(null===t.winTeamIndex)t.realMatchTeamList.forEach((a=>{a.forEach((a=>{if(!d(a.player))return;const o=e.getPlayer(a.player);o.setMatchDate(t.matchDate),o.drawMatch(),o.drawOrder(a.order)}))}));else{const a=(0,M.E)(t.winTeamIndex),o=t.realMatchTeamList[t.winTeamIndex],n=t.realMatchTeamList[a],i=o.map((t=>t.player)).filter((t=>d(t.player))),r=n.map((t=>t.player)).filter((t=>d(t.player)));o.forEach((a=>{if(!d(a.player))return;const o=e.getPlayer(a.player);o.winMatch(),o.setMatchDate(t.matchDate),o.winOrder(a.order);const n=f(i,a.player);for(let t=1;t<=4;t++)(0,M.U)(n,t).forEach((t=>{o.winSameTeamMatch(t)}));for(let t=1;t<=5;t++)(0,M.U)(r,t).forEach((t=>{o.winDiffTeamMatch(t)}))})),n.forEach((a=>{if(c.o_.indexOf(a.player)>-1)return;const o=e.getPlayer(a.player);o.setMatchDate(t.matchDate),o.loseMatch(),o.loseOrder(a.order);const n=f(r,a.player);for(let t=1;t<=4;t++)(0,M.U)(n,t).forEach((t=>{o.loseSameTeamMatch(t)}));for(let t=1;t<=5;t++)(0,M.U)(i,t).forEach((t=>{o.loseDiffTeamMatch(t)}))}))}t.gameList.forEach(((r,s)=>{"队长模式"===t.matchMode&&(n+=1,r.bpFirstTeamIndex===r.winTeamIndex&&(i+=1));const h=(0,M.E)(r.winTeamIndex),l=r.teamList[r.winTeamIndex],u=r.teamList[h];l.heroList.forEach((o=>{if(c.o_.indexOf(o.player)>-1)return;const n=e.getPlayer(o.player);n.winGame(),n.setMatchDate(t.matchDate),n.winLocation(l.location),n.winHero(o.hero);const i=a.getHero(o.hero);i.winGame(o.player,t,s)})),u.heroList.forEach((o=>{if(c.o_.indexOf(o.player)>-1)return;const n=e.getPlayer(o.player);n.loseGame(),n.setMatchDate(t.matchDate),n.loseLocation(u.location),n.loseHero(o.hero);const i=a.getHero(o.hero);i.loseGame(o.player,t,s)})),l.location&&(o[l.location]||(o[l.location]={location:l.location,count:0,winCount:0}),o[l.location].count+=1,o[l.location].winCount+=1),u.location&&(o[u.location]||(o[u.location]={location:u.location,count:0,winCount:0}),o[u.location].count+=1)}))})),{playerManagement:e,heroManagement:a,locationMap:o,wcModelGameCount:n,bpFirstTeamWinCount:i}}},9651:function(t,e,a){a.d(e,{Z:function(){return M}});var o=a(3396),n=a(4870),i=a(7139),r=a(5743),s=a.n(r);const h=(0,n.qj)({form:{date:[],matchType:["TICU正赛","对黑"],excludePlayer:[]}});var c=a(6539),l=a(2580),u=a(8741),m=(0,o.aZ)({__name:"index",props:{hasTimeRange:{type:Boolean,default:!0}},emits:["submit"],setup(t,{emit:e}){const a=t,r=t=>s()(t)>s()(),m=()=>(0,c.Z)().filter((t=>{if(h.form.date&&h.form.date.length&&a.hasTimeRange){const e=s()(t.matchDate)>=s()(h.form.date[0])&&s()(t.matchDate)<=s()(h.form.date[1]);if(!e)return!1}if(h.form.matchType?.length&&-1===h.form.matchType.indexOf(t.matchType))return!1;if(h.form.excludePlayer?.length){const e=t.matchTeamList.flat().find((t=>h.form.excludePlayer.some((e=>t.player===e))));if(e)return!1}return!0})),p=()=>{e("submit",m())};return p(),(e,a)=>{const s=(0,o.up)("el-date-picker"),c=(0,o.up)("el-form-item"),m=(0,o.up)("el-option"),M=(0,o.up)("el-select"),f=(0,o.up)("el-button"),d=(0,o.up)("el-form");return(0,o.wg)(),(0,o.j4)(d,{inline:""},{default:(0,o.w5)((()=>[t.hasTimeRange?((0,o.wg)(),(0,o.j4)(c,{key:0},{default:(0,o.w5)((()=>[(0,o.Wm)(s,{"disabled-date":r,shortcuts:(0,n.SU)(l.B),"start-placeholder":"开始时间","end-placeholder":"结束时间",type:"daterange",modelValue:(0,n.SU)(h).form.date,"onUpdate:modelValue":a[0]||(a[0]=t=>(0,n.SU)(h).form.date=t),clearable:""},null,8,["shortcuts","modelValue"])])),_:1})):(0,o.kq)("",!0),(0,o.Wm)(c,null,{default:(0,o.w5)((()=>[(0,o.Wm)(M,{placeholder:"选择比赛类型",modelValue:(0,n.SU)(h).form.matchType,"onUpdate:modelValue":a[1]||(a[1]=t=>(0,n.SU)(h).form.matchType=t),clearable:"",multiple:"",style:{width:"300px"}},{default:(0,o.w5)((()=>[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)((0,n.SU)(u.ru),((t,e)=>((0,o.wg)(),(0,o.j4)(m,{key:e,label:t,value:t},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),(0,o.Wm)(c,{label:"不包括"},{default:(0,o.w5)((()=>[(0,o.Wm)(M,{placeholder:"不包括超模选手",modelValue:(0,n.SU)(h).form.excludePlayer,"onUpdate:modelValue":a[2]||(a[2]=t=>(0,n.SU)(h).form.excludePlayer=t),clearable:"",filterable:"",multiple:"",style:{width:"350px"}},{default:(0,o.w5)((()=>[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)((0,n.SU)(u.c0),((t,e)=>((0,o.wg)(),(0,o.j4)(m,{key:e,label:t,value:t},{default:(0,o.w5)((()=>[(0,o.Uk)((0,i.zw)(t),1)])),_:2},1032,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),(0,o.Wm)(c,null,{default:(0,o.w5)((()=>[(0,o.Wm)(f,{onClick:p},{default:(0,o.w5)((()=>[(0,o.Uk)("搜索")])),_:1})])),_:1})])),_:1})}}});const p=m;var M=p}}]);
//# sourceMappingURL=353.2f7a08f8.js.map