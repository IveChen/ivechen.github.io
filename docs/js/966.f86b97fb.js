(self["webpackChunkticu"]=self["webpackChunkticu"]||[]).push([[966],{6154:function(e,l,a){var t,o,n;(function(a,u){o=[],t=u,n="function"===typeof t?t.apply(l,o):t,void 0===n||(e.exports=n)})(0,(function(){"use strict";function l(e,l){return"undefined"==typeof l?l={autoBom:!1}:"object"!=typeof l&&(console.warn("Deprecated: Expected third argument to be a object"),l={autoBom:!l}),l.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)?new Blob(["\ufeff",e],{type:e.type}):e}function t(e,l,a){var t=new XMLHttpRequest;t.open("GET",e),t.responseType="blob",t.onload=function(){r(t.response,l,a)},t.onerror=function(){console.error("could not download file")},t.send()}function o(e){var l=new XMLHttpRequest;l.open("HEAD",e,!1);try{l.send()}catch(e){}return 200<=l.status&&299>=l.status}function n(e){try{e.dispatchEvent(new MouseEvent("click"))}catch(t){var l=document.createEvent("MouseEvents");l.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(l)}}var u="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof a.g&&a.g.global===a.g?a.g:void 0,d=u.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),r=u.saveAs||("object"!=typeof window||window!==u?function(){}:"download"in HTMLAnchorElement.prototype&&!d?function(e,l,a){var d=u.URL||u.webkitURL,r=document.createElement("a");l=l||e.name||"download",r.download=l,r.rel="noopener","string"==typeof e?(r.href=e,r.origin===location.origin?n(r):o(r.href)?t(e,l,a):n(r,r.target="_blank")):(r.href=d.createObjectURL(e),setTimeout((function(){d.revokeObjectURL(r.href)}),4e4),setTimeout((function(){n(r)}),0))}:"msSaveOrOpenBlob"in navigator?function(e,a,u){if(a=a||e.name||"download","string"!=typeof e)navigator.msSaveOrOpenBlob(l(e,u),a);else if(o(e))t(e,a,u);else{var d=document.createElement("a");d.href=e,d.target="_blank",setTimeout((function(){n(d)}))}}:function(e,l,a,o){if(o=o||open("","_blank"),o&&(o.document.title=o.document.body.innerText="downloading..."),"string"==typeof e)return t(e,l,a);var n="application/octet-stream"===e.type,r=/constructor/i.test(u.HTMLElement)||u.safari,m=/CriOS\/[\d]+/.test(navigator.userAgent);if((m||n&&r||d)&&"undefined"!=typeof FileReader){var i=new FileReader;i.onloadend=function(){var e=i.result;e=m?e:e.replace(/^data:[^;]*;/,"data:attachment/file;"),o?o.location.href=e:location=e,o=null},i.readAsDataURL(e)}else{var c=u.URL||u.webkitURL,s=c.createObjectURL(e);o?o.location=s:location.href=s,o=null,setTimeout((function(){c.revokeObjectURL(s)}),4e4)}});u.saveAs=r.saveAs=r,e.exports=r}))},8966:function(e,l,a){"use strict";a.r(l),a.d(l,{default:function(){return W}});a(7658);var t=a(3396),o=a(4870),n=a(7139),u=a(2748),d=a(8741),r=a(7178),m=a(8665),i=a(6539),c=a(2483),s=a(6154),f=a.n(s);const p={class:"layout-padding"},w={class:"gutter-v"},g={class:"layout-v"},h={class:"card-header"},b={key:0},v={class:"layout-h"},y={key:0,class:"gutter-v"},k={key:1,class:"gutter-v"},_={key:4,class:"code"};var U=(0,t.aZ)({__name:"index",setup(e){const l=()=>Array.from({length:2},(()=>Array.from({length:5},(()=>({player:"",order:""}))))),a=()=>({matchDate:null,matchRemark:"",matchType:d.ru[0],matchMemberBPMode:d.J9[0],matchMode:d.vk[0],matchTeamList:l(),gameList:[]}),s=(0,t.Fl)((()=>d.J3.filter((e=>e.infinite||!V.form.matchTeamList.flat().find((l=>l.player===e.nickName)))))),U=(0,t.Fl)((()=>d.zS.filter((e=>"固定"===e||!V.form.matchTeamList.flat().find((l=>l.order===e)))))),V=(0,o.qj)({form:a(),isLock:!1,showCode:!1}),L=(0,c.yj)(),{matchId:W}=L.query,T=`match-edit-${W}`,j=()=>{if(W){const e=(0,i.Z)().find((e=>e.id===W));e&&(V.isLock=!0,V.form=e)}else{const e=localStorage.getItem(T);e&&(V.form=JSON.parse(e)),V.form.gameList?.length&&(V.isLock=!0)}};j();const D=()=>{V.form.matchTeamList?.flat().find((e=>!e.player||!e.order))?r.z8.error("请选择队伍人员和顺序"):V.isLock=!0},H=()=>{const e={gameType:d.xm[0],winTeamIndex:null,bpFirstTeamIndex:"",bpHeroQueue:[],teamList:V.form.matchTeamList.map((e=>({location:null,heroList:e.map((e=>({player:e.player,hero:""})))})))};V.form.gameList.push(e)},S=e=>{V.form.gameList.splice(e,1)},x=()=>{V.isLock=!1,V.form=a()},Y=()=>{V.showCode=!V.showCode},M=e=>V.form.matchTeamList[e]?.map((e=>e.player)).join("");(0,t.YP)((()=>V.form),(()=>{localStorage.setItem(T,JSON.stringify(V.form))}),{deep:!0});const C=(0,t.Fl)((()=>{const e=[0,0],l=[0,0];let a=null;return V.form.gameList.forEach((a=>{"加赛"===a.gameType?l[a.winTeamIndex]=l[a.winTeamIndex]+1:e[a.winTeamIndex]=e[a.winTeamIndex]+1})),e[0]>e[1]&&(a=0),e[0]<e[1]&&(a=1),{...V.form,scoreList:e,playOffScoreList:l,winTeamIndex:a}})),K=()=>{if(!V.form.matchDate)return void r.z8.error("请选择比赛时间");const e=new Blob([JSON.stringify(C.value)],{type:"application/json; charset=utf-8"});f().saveAs(e,`${V.form.matchDate}.json`)};return(e,l)=>{const a=(0,t.up)("el-alert"),r=(0,t.up)("el-date-picker"),i=(0,t.up)("el-form-item"),c=(0,t.up)("el-option"),f=(0,t.up)("el-select"),L=(0,t.up)("el-input"),W=(0,t.up)("el-form"),T=(0,t.up)("el-card"),j=(0,t.up)("el-button");return(0,t.wg)(),(0,t.iD)("div",p,[(0,t._)("div",w,[(0,t.Wm)(a,{type:"error",title:"比赛配置完后，点击复制下载配置按钮将文件给开发人员添加/覆盖数据后重新打包即可"})]),(0,t.Wm)(T,{header:"比赛设置",class:"gutter-v"},{default:(0,t.w5)((()=>[(0,t.Wm)(W,{inline:""},{default:(0,t.w5)((()=>[(0,t.Wm)(i,{label:"比赛日期"},{default:(0,t.w5)((()=>[(0,t.Wm)(r,{size:e.size,placeholder:"选择比赛日期",type:"date",modelValue:V.form.matchDate,"onUpdate:modelValue":l[0]||(l[0]=e=>V.form.matchDate=e),"value-format":"YYYY-MM-DD"},null,8,["size","modelValue"])])),_:1}),(0,t.Wm)(i,{label:"比赛类型"},{default:(0,t.w5)((()=>[(0,t.Wm)(f,{placeholder:"选择比赛类型",modelValue:V.form.matchType,"onUpdate:modelValue":l[1]||(l[1]=e=>V.form.matchType=e)},{default:(0,t.w5)((()=>[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)((0,o.SU)(d.ru),((e,l)=>((0,t.wg)(),(0,t.j4)(c,{key:l,label:e,value:e},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),(0,t.Wm)(i,{label:"比赛模式"},{default:(0,t.w5)((()=>[(0,t.Wm)(f,{placeholder:"选择比赛类型",modelValue:V.form.matchMode,"onUpdate:modelValue":l[2]||(l[2]=e=>V.form.matchMode=e)},{default:(0,t.w5)((()=>[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)((0,o.SU)(d.vk),((e,l)=>((0,t.wg)(),(0,t.j4)(c,{key:l,label:e,value:e},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),(0,t.Wm)(i,{label:"选马方式"},{default:(0,t.w5)((()=>[(0,t.Wm)(f,{placeholder:"选择比赛类型",modelValue:V.form.matchMemberBPMode,"onUpdate:modelValue":l[3]||(l[3]=e=>V.form.matchMemberBPMode=e)},{default:(0,t.w5)((()=>[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)((0,o.SU)(d.J9),((e,l)=>((0,t.wg)(),(0,t.j4)(c,{key:l,label:e,value:e},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),(0,t.Wm)(i,{label:"备注"},{default:(0,t.w5)((()=>[(0,t.Wm)(L,{modelValue:V.form.matchRemark,"onUpdate:modelValue":l[4]||(l[4]=e=>V.form.matchRemark=e),placeholder:"请填写比赛备注"},null,8,["modelValue"])])),_:1})])),_:1})])),_:1}),((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)((0,o.SU)(d.XH),((e,l)=>((0,t.wg)(),(0,t.j4)(T,{header:e.name,class:"gutter-v",key:l},{default:(0,t.w5)((()=>[(0,t.Wm)(W,{inline:""},{default:(0,t.w5)((()=>[((0,t.wg)(),(0,t.iD)(t.HY,null,(0,t.Ko)(5,((e,a)=>(0,t.Wm)(i,{key:a},{default:(0,t.w5)((()=>[(0,t._)("div",g,[(0,t._)("div",null,[(0,t.Wm)(f,{placeholder:`选择队员${a+1}`,modelValue:V.form.matchTeamList[l][a].player,"onUpdate:modelValue":e=>V.form.matchTeamList[l][a].player=e,clearable:"",disabled:V.isLock,filterable:""},{default:(0,t.w5)((()=>[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)((0,o.SU)(s),((e,l)=>((0,t.wg)(),(0,t.j4)(c,{key:l,label:`${e.nickName}(${e.name})`,value:e.nickName},null,8,["label","value"])))),128))])),_:2},1032,["placeholder","modelValue","onUpdate:modelValue","disabled"])]),(0,t._)("div",null,[(0,t.Wm)(f,{placeholder:`选择队员${a+1}顺序`,modelValue:V.form.matchTeamList[l][a].order,"onUpdate:modelValue":e=>V.form.matchTeamList[l][a].order=e,clearable:"",disabled:V.isLock},{default:(0,t.w5)((()=>[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)((0,o.SU)(U),((e,l)=>((0,t.wg)(),(0,t.j4)(c,{key:l,label:e,value:e},null,8,["label","value"])))),128))])),_:2},1032,["placeholder","modelValue","onUpdate:modelValue","disabled"])])])])),_:2},1024))),64))])),_:2},1024)])),_:2},1032,["header"])))),128)),((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(V.form.gameList,((e,l)=>((0,t.wg)(),(0,t.j4)(T,{key:l,class:"gutter-v"},{header:(0,t.w5)((()=>[(0,t._)("div",h,[(0,t._)("span",null,"对局"+(0,n.zw)(l+1),1),(0,t.Wm)(j,{class:"button",text:"",onClick:e=>S(l)},{default:(0,t.w5)((()=>[(0,t.Uk)("删除对局")])),_:2},1032,["onClick"])])])),default:(0,t.w5)((()=>[(0,t.Wm)(W,{inline:""},{default:(0,t.w5)((()=>[(0,t.Wm)(i,{label:"对局类型"},{default:(0,t.w5)((()=>[(0,t.Wm)(f,{placeholder:"对局类型",modelValue:e.gameType,"onUpdate:modelValue":l=>e.gameType=l},{default:(0,t.w5)((()=>[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)((0,o.SU)(d.xm),((e,l)=>((0,t.wg)(),(0,t.j4)(c,{key:l,label:e,value:e},null,8,["label","value"])))),128))])),_:2},1032,["modelValue","onUpdate:modelValue"])])),_:2},1024),(0,t.Wm)(i,{label:"获胜队伍"},{default:(0,t.w5)((()=>[(0,t.Wm)(f,{placeholder:"选择获胜队伍",modelValue:e.winTeamIndex,"onUpdate:modelValue":l=>e.winTeamIndex=l},{default:(0,t.w5)((()=>[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)((0,o.SU)(d.XH),((e,l)=>((0,t.wg)(),(0,t.j4)(c,{key:l,label:M(e.code),value:e.code},{default:(0,t.w5)((()=>[(0,t.Uk)((0,n.zw)(M(e.code)),1)])),_:2},1032,["label","value"])))),128))])),_:2},1032,["modelValue","onUpdate:modelValue"])])),_:2},1024),(0,t.Wm)(i,{label:"先BP队伍"},{default:(0,t.w5)((()=>[(0,t.Wm)(f,{placeholder:"选择先Ban先选队伍",modelValue:e.bpFirstTeamIndex,"onUpdate:modelValue":l=>e.bpFirstTeamIndex=l},{default:(0,t.w5)((()=>[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)((0,o.SU)(d.XH),((l,a)=>((0,t.wg)(),(0,t.j4)(c,{key:a,label:M(l.code),value:l.code},{default:(0,t.w5)((()=>[(0,t.Uk)((0,n.zw)(M(l.code))+" ",1),e.teamList[a].location?((0,t.wg)(),(0,t.iD)("span",b,"("+(0,n.zw)(e.teamList[a].location)+")",1)):(0,t.kq)("",!0)])),_:2},1032,["label","value"])))),128)),(0,t.Wm)(c,{label:"无",value:""})])),_:2},1032,["modelValue","onUpdate:modelValue"])])),_:2},1024)])),_:2},1024),(0,t.Wm)(W,null,{default:(0,t.w5)((()=>[(0,t.Wm)(i,{label:"英雄ban选顺序"},{default:(0,t.w5)((()=>[(0,t._)("div",null,(0,n.zw)(e.bpHeroQueue?.length)+"/24 ",1),(0,t.Wm)(f,{placeholder:"选择英雄(可以不选)",modelValue:e.bpHeroQueue,"onUpdate:modelValue":l=>e.bpHeroQueue=l,filterable:"",multiple:"",style:{width:"100%"}},{default:(0,t.w5)((()=>[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)((0,o.SU)(m.Z),((e,l)=>((0,t.wg)(),(0,t.j4)(c,{key:l,label:e.name_loc,value:e.name_loc},null,8,["label","value"])))),128)),(0,t.Wm)(c,{value:"",label:"跳过"})])),_:2},1032,["placeholder","modelValue","onUpdate:modelValue"])])),_:2},1024)])),_:2},1024),(0,t._)("div",v,[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(e.teamList,((e,l)=>((0,t.wg)(),(0,t.j4)(T,{key:l,header:M(l),class:(0,n.C_)(["layout-fill",{"gutter-h":0===l}])},{default:(0,t.w5)((()=>[(0,t.Wm)(i,{label:"位置"},{default:(0,t.w5)((()=>[(0,t.Wm)(f,{placeholder:"选择位置",modelValue:e.location,"onUpdate:modelValue":l=>e.location=l},{default:(0,t.w5)((()=>[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)((0,o.SU)(d.Yf),((e,l)=>((0,t.wg)(),(0,t.j4)(c,{key:l,label:e,value:e},null,8,["label","value"])))),128))])),_:2},1032,["modelValue","onUpdate:modelValue"])])),_:2},1024),((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(e.heroList,((e,l)=>((0,t.wg)(),(0,t.j4)(i,{label:`${e.player}`,key:l},{default:(0,t.w5)((()=>[(0,t.Wm)(f,{placeholder:"选择英雄",modelValue:e.hero,"onUpdate:modelValue":l=>e.hero=l,filterable:""},{default:(0,t.w5)((()=>[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)((0,o.SU)(m.Z),((e,l)=>((0,t.wg)(),(0,t.j4)(c,{key:l,label:e.name_loc,value:e.name_loc},null,8,["label","value"])))),128))])),_:2},1032,["modelValue","onUpdate:modelValue"])])),_:2},1032,["label"])))),128))])),_:2},1032,["header","class"])))),128))])])),_:2},1024)))),128)),V.isLock?(0,t.kq)("",!0):((0,t.wg)(),(0,t.iD)("div",y,[(0,t.Wm)(j,{onClick:D,type:"success"},{default:(0,t.w5)((()=>[(0,t.Uk)("锁定参赛人员")])),_:1})])),V.isLock?((0,t.wg)(),(0,t.iD)("div",k,[(0,t.Wm)(j,{onClick:H,type:"success",icon:(0,o.SU)(u.v37)},{default:(0,t.w5)((()=>[(0,t.Uk)("添加对局")])),_:1},8,["icon"]),(0,t.Wm)(j,{onClick:K,type:"success"},{default:(0,t.w5)((()=>[(0,t.Uk)("复制下载配置")])),_:1}),(0,t.Wm)(j,{type:"danger",style:{"margin-left":"100px"},onClick:x},{default:(0,t.w5)((()=>[(0,t.Uk)("清空")])),_:1})])):(0,t.kq)("",!0),V.showCode?(0,t.kq)("",!0):((0,t.wg)(),(0,t.j4)(j,{key:2,onClick:Y},{default:(0,t.w5)((()=>[(0,t.Uk)("查看配置")])),_:1})),V.showCode?((0,t.wg)(),(0,t.j4)(j,{key:3,onClick:Y},{default:(0,t.w5)((()=>[(0,t.Uk)("收起配置")])),_:1})):(0,t.kq)("",!0),V.showCode?((0,t.wg)(),(0,t.iD)("pre",_,[(0,t.Uk)("      "),(0,t._)("code",null,(0,n.zw)((0,o.SU)(C)),1),(0,t.Uk)("\n    ")])):(0,t.kq)("",!0)])}}}),V=a(89);const L=(0,V.Z)(U,[["__scopeId","data-v-5f5dd1c2"]]);var W=L}}]);
//# sourceMappingURL=966.f86b97fb.js.map